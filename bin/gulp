#!/usr/bin/env ruby
require 'rubygems'
require 'trollop'
require 'gulp'

interrupted = false
trap("INT") { interrupted = true }

opts = Trollop::options do
  opt :database_directory, "Database directory", :type => String, :required => true
  opt :quiet, "Use minimal output", :short => 'q'
end

puts opts.inspect
gulp = Gulp.new(:database_directory => opts[:database_directory] || '.')

files_to_process.each do |file|
  gulp.add_xml_file_to_corpus(file)
  
  if interrupted
    puts "exiting cleanly"
    exit
  end
end